# section5

概述

这篇文档是使用Zookeeper协调服务开发分布式应用的开发者编程指南。它包含概念性的和实用性信息。



这个指南开始的4个部分对Zookeeper的概念提出了高层次的论述。这对理解Zookeeper怎样工作和怎样使用它都非常重要。它不包含源代码，但是它呈现了分布式计算的相关问题。第一组的章节是：



Zookeeper数据模型

Zookeeper会话

Zookeeper Watches

一致性保证

接下来的4个章节提供了实际的编程信息，它们是：



Zookeeper操作指南

绑定

程序结构，简单例子

常见问题和故障排除

文章的结尾有一个目录，它包含了一些其他有用的与Zookeeper有关的信息的链接。



这篇文档的大部分信息写成独立的容易理解的参考资料。然而，在开始你的第一个Zookeeper应用之前，你至少要读Zookeeper数据模型和Zookeeper基本操作上的部分。并且，简单的编程例子对理解Zookeeper客户端应用的基础结构非常有帮助。



Zookeeper数据模型

Zookeeper有一个分层的命名空间，非常像一个分布式的文件系统。不同的地方仅仅是命名空间里的每个节点可以有关联数据，也可以有子目录。它就像一个既可以是文件又可以是目录的文件系统。路径节点总是表示为标准的，绝对的，以斜线为分隔符的路径；没有相对引用。任何unicode编码字符都可以用在路径上，但是有以下限制：



null字符\(\u0000\)不能作为路径名字的一部分\(这将导致C绑定的问题\)。

下面的字符不能用，因为它们显示不好或者显示混乱：\u0001 - \u0019 and \u007F - \u009F.

下面的字符不允许： \ud800 -uF8FFF, \uFFF0-uFFFF, \uXFFFE - \uXFFFF \(其中X是一个数字：1-E\), \uF0000 - \uFFFFF.

"."字符可以作为名字的一部分，但是"."和".."不能单独使用。因为Zokeeper不使用相对路径。下面的路径将是无效的："/a/b/./c" or "/a/b/../c".

"zookeeper"标记是预留的。

Znodes



Zookeeper中的每个节点都被称为znode。Znode维护了一个stat结构，这个stat包含数据变化的版本号、访问控制列表变化。stat结构还有时间戳。版本号和时间戳一起，可让Zookeeper验证缓存和协调更新。每次znode的数据发生了变化，版本号就增加。例如，无论何时客户端检索数据，它也一起检索数据的版本号。并且当客户端执行更新或删除时，客户端必须提供他正在改变的znode的版本号。如果它提供的版本号和真实的数据版本号不一致，更新将会失败。\(这种行为可以被覆盖\)



在分布式应用工程中，node可以指的是一般的主机，一个服务器，全体成员的一员，一个客户端程序，等等。在Zookeeper的文档中，znode指的是数据节点。Servers指的是组成Zookeeper服务的机器；quorum peers 指的是组成全体的servers；client指的是任何使用Zookeeper服务的主机和程序

